(function(t){function e(e){for(var i,o,r=e[0],c=e[1],l=e[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,o=1;o<s.length;o++){var c=s[o];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var i={},n={app:0},a=[];function o(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d0b1e44":"8dc7153d","chunk-2d0ddf64":"b274e0c6"}[t]+".js"}function r(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(t){var e=[],s=n[t];if(0!==s)if(s)e.push(s[2]);else{var i=new Promise((function(e,i){s=n[t]=[e,i]}));e.push(s[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t);var l=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(u);var s=n[t];if(0!==s){if(s){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,s[1](l)}n[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=i,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},2395:function(t,e,s){},"2e73":function(t,e,s){},"2f63":function(t,e,s){"use strict";s("88bd")},3799:function(t,e,s){"use strict";s("2e73")},"40b7":function(t,e,s){},"4b25":function(t,e,s){},5082:function(t,e,s){"use strict";s("40b7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-header",{attrs:{seller:t.seller}}),s("div",{staticClass:"tab"},[s("div",{staticClass:"tab-wrapper"},[s("router-link",{attrs:{to:"/"}},[t._v("商品")])],1),s("div",{staticClass:"tab-wrapper"},[s("router-link",{attrs:{to:"/comment"}},[t._v("评论")])],1),s("div",{staticClass:"tab-wrapper"},[s("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),s("router-view",{attrs:{seller:t.seller}})],1)},a=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header",on:{click:t.showDetail}},[s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{width:"64",height:"64",src:t.seller.avatar,alt:""}})]),s("div",{staticClass:"content"},[s("div",{staticClass:"title"},[s("span",{staticClass:"brand"}),s("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),s("div",{staticClass:"description"},[t._v(" "+t._s(t.seller.description)+" / "+t._s(t.seller.deliveryTime)+"分钟送达 ")]),t.seller.supports?s("div",{staticClass:"support"},[s("support-ico",{attrs:{type:t.seller.supports[0].type}}),s("div",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])],1):t._e()]),s("div",[t.seller.supports?s("div",{staticClass:"support-count"},[s("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),s("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()])]),s("div",{staticClass:"bulletin-wrapper"},[s("span",{staticClass:"bulletin-title"}),s("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),s("i",{staticClass:"icon-keyboard_arrow_right"})]),s("div",{staticClass:"background"},[s("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})]),t.seller.supports?s("header-detail",{directives:[{name:"show",rawName:"v-show",value:t.detailVisible,expression:"detailVisible"}],attrs:{supports:t.seller.supports,bulletin:t.seller.bulletin,name:t.seller.name},on:{hide:t.hideDetail}}):t._e()],1)},r=[],c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"support-ico icon-1 decrease",class:t.iconCls})},l=[],u=(s("a9e3"),{props:{size:{type:Number},type:{type:Number}},computed:{iconCls:function(){var t=["decrease","discount","special","invoice","guarantee"];return t[this.type]}}}),d=u,p=(s("a097"),s("2877")),f=Object(p["a"])(d,c,l,!1,null,null,null),h=f.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"header-detail"},[s("div",{staticClass:"detail-wrapper"},[s("div",{staticClass:"detail-main"},[s("h1",{staticClass:"name"},[t._v(t._s(t.name))]),s("div",{staticClass:"star-wrapper"}),s("div",{staticClass:"title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"text"},[t._v("优惠信息")]),s("div",{staticClass:"line"})]),s("ul",{staticClass:"supports"},t._l(t.supports,(function(e){return s("li",{key:e.type,staticClass:"supports-item"},[s("support-ico",{attrs:{type:e.type}}),s("span",{staticClass:"text"},[t._v(t._s(e.description))])],1)})),0),s("div",{staticClass:"title"},[s("div",{staticClass:"line"}),s("div",{staticClass:"text"},[t._v("商家公告")]),s("div",{staticClass:"line"})]),s("div",{staticClass:"bulletin"},[s("p",{staticClass:"content"},[t._v(t._s(t.bulletin))])])])]),s("div",{staticClass:"detail-close",on:{click:function(e){return e.stopPropagation(),t.hide.apply(null,arguments)}}},[s("i",{staticClass:"icon-close"})])])])},C=[],m={components:{supportIco:h},props:{supports:{type:Array,default:function(){return[]}},name:{type:String,default:function(){return""}},bulletin:{type:String,default:function(){return"default"}}},methods:{hide:function(){this.$emit("hide",!1)}}},_=m,b=(s("8e92"),Object(p["a"])(_,v,C,!1,null,null,null)),y=b.exports,g={components:{SupportIco:h,HeaderDetail:y},props:{seller:{type:Object,default:function(){return{}}}},data:function(){return{detailVisible:!1}},methods:{showDetail:function(){this.detailVisible=!0},hideDetail:function(t){this.detailVisible=t}}},w=g,P=(s("2f63"),Object(p["a"])(w,o,r,!1,null,null,null)),k=P.exports,x=s("bc3a"),j=s.n(x),O="";function S(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j.a.get(O+t,{params:e}).then((function(t){var e=t.data,s=e.errno,i=e.data;if(0===s)return i})).catch((function(t){console.log(t)}))}}var $=S("api/seller"),E=S("api/goods"),T={components:{VHeader:k},data:function(){return{seller:{}}},created:function(){var t=this;$().then((function(e){t.seller=e,console.log(e)}))}},H=T,N=(s("7c55"),Object(p["a"])(H,n,a,!1,null,null,null)),D=N.exports,M=(s("d3b7"),s("3ca3"),s("ddb0"),s("8c4f")),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"goods"},[s("div",{ref:"mw",staticClass:"menu-wrapper"},[this.goods.length?s("ul",t._l(t.goods,(function(e,i){return s("li",{key:i,staticClass:"menu-item",class:{current:t.currentIndex===i},on:{click:function(e){return t.selectMenu(i)}}},[-1!==e.type?s("support-ico",{attrs:{type:e.type,size:2}}):t._e(),t._v(" "+t._s(e.name)+" ")],1)})),0):t._e()]),s("div",{ref:"fw",staticClass:"foods-wrapper"},[s("ul",t._l(t.goods,(function(e,i){return s("li",{key:i,ref:"foodList",refInFor:!0,staticClass:"food-list"},[s("h1",{staticClass:"title"},[t._v(t._s(e.name))]),s("ul",t._l(e.foods,(function(e,i){return s("li",{key:i,staticClass:"food-item"},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:e.icon}})]),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"desc"},[t._v(t._s(e.description))]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("月售"+t._s(e.sellCount))]),s("span",[t._v("好评"+t._s(e.rating)+"%")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(e.price))]),e.oldPrice?s("span",{staticClass:"old"},[t._v("￥"+t._s(e.oldPrice))]):t._e()]),s("div",{staticClass:"cartcontrol-wrapper"},[s("cart-control",{attrs:{food:e}})],1)])])})),0)])})),0)])]),t.seller?s("shop-cart",{attrs:{foods:t.selectFoods,deliveryPrice:t.seller.deliveryPrice,minPrice:t.seller.minPrice}}):t._e()],1)},V=[],L=s("b85c"),B=(s("159b"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-control"},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food&&t.food.count>0,expression:"food&&food.count > 0"}],staticClass:"cart-decrease",on:{click:function(e){return e.stopPropagation(),t.decreaseCart.apply(null,arguments)}}},[s("span",{staticClass:"inner icon-remove_circle_outline"})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food&&t.food.count>0,expression:"food&&food.count > 0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("div",{staticClass:"cart-add icon-add_circle",on:{click:function(e){return e.stopPropagation(),t.addCart.apply(null,arguments)}}})],1)}),Y=[],A={props:{food:{type:Object}},methods:{addCart:function(){this.food.count?this.food.count++:this.$set(this.food,"count",1)},decreaseCart:function(){this.food.count&&this.food.count--}}},F=A,z=(s("3799"),Object(p["a"])(F,B,Y,!1,null,null,null)),J=z.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"shop-cart"},[s("div",{staticClass:"content",on:{click:function(e){return e.stopPropagation(),t.changeShow.apply(null,arguments)}}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount}},[s("i",{staticClass:"icon-shopping_cart",class:{highlight:t.totalCount}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"num"},[t._v(t._s(this.totalCount))])]),s("div",{staticClass:"price",class:{highlight:this.totalPrice}},[t._v(" ￥"+t._s(this.totalPrice)+" ")]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(this.deliveryPrice))])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"pay",class:t.totalPrice>=20?"enough":"not-enough"},[t._v(" "+t._s(t.payDesc)+" ")])])]),s("transition",{attrs:{name:"fold"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isCartShow,expression:"isCartShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),s("div",{ref:"lc",staticClass:"list-content"},[s("ul",t._l(t.foods,(function(e,i){return s("li",{key:i,staticClass:"food"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"price"},[s("span",{},[t._v(" "+t._s(e.price*e.count)+" ")])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("cart-control",{attrs:{food:e}})],1)])})),0)])])])],1)])},G=[],K=s("f40f"),Q={components:{CartControl:J},data:function(){return{total:0,isCartShow:!1}},props:{foods:{type:Array},deliveryPrice:{type:Number},minPrice:{type:Number}},methods:{changeShow:function(){var t=this;0!==this.foods.length&&(this.isCartShow=!this.isCartShow,this.$nextTick((function(){t._initBS()})))},empty:function(){this.foods.forEach((function(t){t.count=0})),this.isCartShow=!1},_initBS:function(){this.lcs=new K["a"](this.$refs.lc,{click:!0,probeType:3}),console.log(this.lcs)}},computed:{totalCount:function(){var t,e=0,s=Object(L["a"])(this.foods);try{for(s.s();!(t=s.n()).done;){var i=t.value;e+=i.count}}catch(n){s.e(n)}finally{s.f()}return e},totalPrice:function(){var t,e=0,s=Object(L["a"])(this.foods);try{for(s.s();!(t=s.n()).done;){var i=t.value;e+=i.count*i.price}}catch(n){s.e(n)}finally{s.f()}return e},payDesc:function(){return 0===this.totalPrice?"￥".concat(this.minPrice,"元起送"):this.totalPrice<this.minPrice?"还差￥".concat(this.minPrice-this.totalPrice,"元起送"):"去结算"},onePrice:function(t,e){return"".concat(t*e)}},created:function(){}},R=Q,U=(s("5082"),Object(p["a"])(R,q,G,!1,null,null,null)),W=U.exports,X={props:{seller:{type:Object}},components:{SupportIco:h,CartControl:J,ShopCart:W},data:function(){return{goods:[],listHeight:[],scrollY:0,food:{},foods:[]}},created:function(){var t=this;E().then((function(e){t.goods=e,console.log(e),t.$nextTick((function(){t._initBS(),t._calculateHeight()}))}))},methods:{selectMenu:function(t){var e=this.$refs.foodList,s=e[t];this.fws.scrollToElement(s,300)},_initBS:function(){var t=this;this.fws=new K["a"](this.$refs.fw,{click:!0,probeType:3}),this.mws=new K["a"](this.$refs.mw,{click:!0,probeType:3}),this.fws.on("scroll",(function(e){t.scrollY=Math.abs(e.y)}))},_calculateHeight:function(){var t=this,e=this.$refs.foodList,s=0;this.listHeight.push(s),e.forEach((function(e){s+=e.clientHeight,t.listHeight.push(s)}))}},computed:{currentIndex:function(){var t=this,e=0;return this.listHeight.forEach((function(s,i){t.scrollY>=s&&t.scrollY<t.listHeight[i+1]&&(e=i)})),e},selectFoods:function(){var t,e=[],s=Object(L["a"])(this.goods);try{for(s.s();!(t=s.n()).done;){var i,n=t.value,a=Object(L["a"])(n.foods);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.count&&e.push(o)}}catch(r){a.e(r)}finally{a.f()}}}catch(r){s.e(r)}finally{s.f()}return e}}},Z=X,tt=(s("7773"),Object(p["a"])(Z,I,V,!1,null,null,null)),et=tt.exports;i["a"].use(M["a"]);var st=[{path:"/",name:"goods",component:et},{path:"/comment",name:"comment",component:function(){return s.e("chunk-2d0ddf64").then(s.bind(null,"842d"))}},{path:"/seller",name:"seller",component:function(){return s.e("chunk-2d0b1e44").then(s.bind(null,"227e"))}}],it=new M["a"]({mode:"history",base:"/",routes:st}),nt=it;s("dded");i["a"].config.productionTip=!1,new i["a"]({router:nt,render:function(t){return t(D)}}).$mount("#app")},7773:function(t,e,s){"use strict";s("4b25")},"7c55":function(t,e,s){"use strict";s("2395")},"81bf":function(t,e,s){},"88bd":function(t,e,s){},"8e92":function(t,e,s){"use strict";s("81bf")},9700:function(t,e,s){},a097:function(t,e,s){"use strict";s("9700")},dded:function(t,e,s){}});
//# sourceMappingURL=app.0d352237.js.map